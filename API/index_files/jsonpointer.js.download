;(function(){'use strict';var SPECIAL_CHARACTERS=[['/','~1'],['~','~0']];var TOKENS_SEPARATOR='/';var ERROR_MESSAGE_PREFIX='JSON Pointer: ';var NON_EMPTY_POINTER_REGEXP=/(\/[^\/]*)+/;var ErrorMessage={HYPHEN_IS_NOT_SUPPORTED_IN_ARRAY_CONTEXT:'Implementation does not support "-" token for arrays.',INVALID_DOCUMENT:'JSON document is not valid.',INVALID_DOCUMENT_TYPE:'JSON document must be a string or object.',INVALID_POINTER:'Pointer is not valid.',NON_NUMBER_TOKEN_IN_ARRAY_CONTEXT:'Non-number tokens cannot be used in array context.',TOKEN_WITH_LEADING_ZERO_IN_ARRAY_CONTEXT:'Token with leading zero cannot be used in array context.'};function getPointedValue(target,opt_pointer){if(isString(target)){try{target=JSON.parse(target);}
catch(e){throw getError(ErrorMessage.INVALID_DOCUMENT);}}
else if(!isObject(target)){throw getError(ErrorMessage.INVALID_DOCUMENT_TYPE);}
var evaluator=createPointerEvaluator(target);if(isUndefined(opt_pointer)){return evaluator;}
else{return evaluator(opt_pointer);}}
function createPointerEvaluator(target){var cache={};return function(pointer){if(!isValidJSONPointer(pointer)){throw getError(ErrorMessage.INVALID_POINTER);}
if(cache.hasOwnProperty(pointer)){return cache[pointer];}
var tokensList=parsePointer(pointer);var token;var value=target;while(!isUndefined(value)&&!isUndefined(token=tokensList.pop())){value=getValue(value,token);}
cache[pointer]=value;return value;};}
function isValidJSONPointer(pointer){if(!isString(pointer)){return false;}
if(''===pointer){return true;}
return NON_EMPTY_POINTER_REGEXP.test(pointer);}
function parsePointer(pointer){var tokens=pointer.split(TOKENS_SEPARATOR).reverse();tokens.pop();return tokens;}
function unescapeReferenceToken(rawReferenceToken){var referenceToken=rawReferenceToken;var character;var escapeSequence;var replaceRegExp;SPECIAL_CHARACTERS.forEach(function(pair){character=pair[0];escapeSequence=pair[1];replaceRegExp=new RegExp(escapeSequence,'g');referenceToken=referenceToken.replace(replaceRegExp,character);});return referenceToken;}
function getValue(context,token){token=unescapeReferenceToken(token);if(isArray(context)){if('-'===token){throw getError(ErrorMessage.HYPHEN_IS_NOT_SUPPORTED_IN_ARRAY_CONTEXT);}
if(!isNumber(token)){throw getError(ErrorMessage.NON_NUMBER_TOKEN_IN_ARRAY_CONTEXT);}
if(token.length>1&&'0'===token[0]){throw getError(ErrorMessage.TOKEN_WITH_LEADING_ZERO_IN_ARRAY_CONTEXT);}
return context[token];}
if(isObject(context)){return context[token];}
return;}
function getError(message){return new Error(ERROR_MESSAGE_PREFIX+ message);}
function isObject(o){return'object'===typeof o&&null!==o;}
function isArray(a){return Array.isArray(a);}
function isNumber(n){return!isNaN(Number(n));}
function isString(s){return'string'===typeof s||s instanceof String;}
function isUndefined(v){return'undefined'===typeof v;}
var jsonpointer={get:getPointedValue};if('object'===typeof exports){module.exports=jsonpointer;}else if('function'===typeof define&&define.amd){define(function(){return jsonpointer;});}else{this.jsonpointer=jsonpointer;}}).call((function(){'use strict';return(typeof window!=='undefined'?window:global);})());